<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>「Algorithm」01 基础算法 | Ming Blog</title>
<meta name="keywords" content="" />
<meta name="description" content="第一章 基础算法 包括排序，二分，高精度，前缀和与差分，位运算，离散化，区间合并
消除同步  ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。 scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。 可以使用freopen  还可以加上 cin.tie(0) 来解除c&#43;&#43;运行库层面的对数据传输的绑定。
排序 1. 快速排序 基于分治。
 确定一个分界点，比如（以1开始）,取q[1]，q[(1&#43;r)/2] ,q[r]， 随机为x 调整区间，小于等于x的在左边，大于等于x的在右边。等于x的可以在左边也可以在右边，也可以在边界上，不稳定。 递归处理左右两段。    方法一:
 开两个额外的数组,a[]，b[] 扫描q数组，如果q[i] ≤ x，存入a，如果q[i]&gt;x，存入b。 然后将a数组的数存入q，b数组的数存入q。    方法二：
 i和j指针，i指向初始，j指向末尾。然后i向右走，直到遇到一个大于x的数。j向左走，直到遇到一个小于等于x的数。然后交换，直到 j ≤ i.  模板：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  #include &lt;iostream&gt; using namespace std; const int N = 1e6 &#43; 10; int n; int q[N]; void quick_sort(int q[], int l, int r) { if (l &gt;= r) return; int x = q[(l&#43;r) &gt;&gt; 1], i = l - 1, j = r &#43; 1; while( i &lt; j){ do i &#43;&#43; ; while (q[i] &lt; x); do j -- ; while (q[j] &gt; x); if (i &lt; j ) swap(q[i],q[j]); } //j可能比i小，也可能等于i。  quick_sort(q, l, j); //也可以换成 l, i -1  quick_sort(q, j &#43; 1, r); //换成 i, r  //后来说明不能换成i，因为也是会出现死循环问题。  //遇到这种情况，就考虑0,1。  //用j的话，x不能取右边界，（j可以取q[l]、q[(l&#43;r)/2]）  //j不能取 q[r]、q[(l&#43;r&#43;1)/2]  //用i的话，x不能取左边界。 (i可以取q[r]、q[(l&#43;r&#43;1)/2])  //i不能取 q[l]、q[(l&#43;r)/2] } //当下面换成i,r时，不能取x=q[l]，因为会出现死循环的问题。比如排序1，2 //i最终为0，j也是0，这样使用quick_sort()会死循环。 //同理，如果取j&#43;1,r，不能取右边界。  int main(){ scanf(&#34;%d&#34;,&amp;n); for(int i = 0; i &lt; n; i &#43;&#43; ) scanf(&#34;%d&#34;,&amp;q[i]); quick_sort(q,0,n-1); for(int i = 0; i &lt; n; i &#43;&#43; ) printf(&#34;%d &#34;,q[i]); return 0; } 排序的话，可以使用 #include&lt;algorithm&gt;sort(q, q&#43;n);     2.">
<meta name="author" content="">
<link rel="canonical" href="https://imingx.github.io/posts/algorithm_01/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.97205c369555a18d88de14e7df9c15849f512bad07e3a7910316eec08663939b.css" integrity="sha256-lyBcNpVVoY2I3hTn35wVhJ9RK60H46eRAxbuwIZjk5s=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://imingx.github.io/images/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://imingx.github.io/images/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://imingx.github.io/images/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://imingx.github.io/images/apple-touch-icon.png">
<link rel="mask-icon" href="https://imingx.github.io/images/favicon.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.88.1" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="「Algorithm」01 基础算法" />
<meta property="og:description" content="第一章 基础算法 包括排序，二分，高精度，前缀和与差分，位运算，离散化，区间合并
消除同步  ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。 scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。 可以使用freopen  还可以加上 cin.tie(0) 来解除c&#43;&#43;运行库层面的对数据传输的绑定。
排序 1. 快速排序 基于分治。
 确定一个分界点，比如（以1开始）,取q[1]，q[(1&#43;r)/2] ,q[r]， 随机为x 调整区间，小于等于x的在左边，大于等于x的在右边。等于x的可以在左边也可以在右边，也可以在边界上，不稳定。 递归处理左右两段。    方法一:
 开两个额外的数组,a[]，b[] 扫描q数组，如果q[i] ≤ x，存入a，如果q[i]&gt;x，存入b。 然后将a数组的数存入q，b数组的数存入q。    方法二：
 i和j指针，i指向初始，j指向末尾。然后i向右走，直到遇到一个大于x的数。j向左走，直到遇到一个小于等于x的数。然后交换，直到 j ≤ i.  模板：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  #include &lt;iostream&gt; using namespace std; const int N = 1e6 &#43; 10; int n; int q[N]; void quick_sort(int q[], int l, int r) { if (l &gt;= r) return; int x = q[(l&#43;r) &gt;&gt; 1], i = l - 1, j = r &#43; 1; while( i &lt; j){ do i &#43;&#43; ; while (q[i] &lt; x); do j -- ; while (q[j] &gt; x); if (i &lt; j ) swap(q[i],q[j]); } //j可能比i小，也可能等于i。  quick_sort(q, l, j); //也可以换成 l, i -1  quick_sort(q, j &#43; 1, r); //换成 i, r  //后来说明不能换成i，因为也是会出现死循环问题。  //遇到这种情况，就考虑0,1。  //用j的话，x不能取右边界，（j可以取q[l]、q[(l&#43;r)/2]）  //j不能取 q[r]、q[(l&#43;r&#43;1)/2]  //用i的话，x不能取左边界。 (i可以取q[r]、q[(l&#43;r&#43;1)/2])  //i不能取 q[l]、q[(l&#43;r)/2] } //当下面换成i,r时，不能取x=q[l]，因为会出现死循环的问题。比如排序1，2 //i最终为0，j也是0，这样使用quick_sort()会死循环。 //同理，如果取j&#43;1,r，不能取右边界。  int main(){ scanf(&#34;%d&#34;,&amp;n); for(int i = 0; i &lt; n; i &#43;&#43; ) scanf(&#34;%d&#34;,&amp;q[i]); quick_sort(q,0,n-1); for(int i = 0; i &lt; n; i &#43;&#43; ) printf(&#34;%d &#34;,q[i]); return 0; } 排序的话，可以使用 #include&lt;algorithm&gt;sort(q, q&#43;n);     2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://imingx.github.io/posts/algorithm_01/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-09T00:30:02&#43;08:00" />
<meta property="article:modified_time" content="2021-11-09T00:30:02&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="「Algorithm」01 基础算法"/>
<meta name="twitter:description" content="第一章 基础算法 包括排序，二分，高精度，前缀和与差分，位运算，离散化，区间合并
消除同步  ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。 scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。 可以使用freopen  还可以加上 cin.tie(0) 来解除c&#43;&#43;运行库层面的对数据传输的绑定。
排序 1. 快速排序 基于分治。
 确定一个分界点，比如（以1开始）,取q[1]，q[(1&#43;r)/2] ,q[r]， 随机为x 调整区间，小于等于x的在左边，大于等于x的在右边。等于x的可以在左边也可以在右边，也可以在边界上，不稳定。 递归处理左右两段。    方法一:
 开两个额外的数组,a[]，b[] 扫描q数组，如果q[i] ≤ x，存入a，如果q[i]&gt;x，存入b。 然后将a数组的数存入q，b数组的数存入q。    方法二：
 i和j指针，i指向初始，j指向末尾。然后i向右走，直到遇到一个大于x的数。j向左走，直到遇到一个小于等于x的数。然后交换，直到 j ≤ i.  模板：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  #include &lt;iostream&gt; using namespace std; const int N = 1e6 &#43; 10; int n; int q[N]; void quick_sort(int q[], int l, int r) { if (l &gt;= r) return; int x = q[(l&#43;r) &gt;&gt; 1], i = l - 1, j = r &#43; 1; while( i &lt; j){ do i &#43;&#43; ; while (q[i] &lt; x); do j -- ; while (q[j] &gt; x); if (i &lt; j ) swap(q[i],q[j]); } //j可能比i小，也可能等于i。  quick_sort(q, l, j); //也可以换成 l, i -1  quick_sort(q, j &#43; 1, r); //换成 i, r  //后来说明不能换成i，因为也是会出现死循环问题。  //遇到这种情况，就考虑0,1。  //用j的话，x不能取右边界，（j可以取q[l]、q[(l&#43;r)/2]）  //j不能取 q[r]、q[(l&#43;r&#43;1)/2]  //用i的话，x不能取左边界。 (i可以取q[r]、q[(l&#43;r&#43;1)/2])  //i不能取 q[l]、q[(l&#43;r)/2] } //当下面换成i,r时，不能取x=q[l]，因为会出现死循环的问题。比如排序1，2 //i最终为0，j也是0，这样使用quick_sort()会死循环。 //同理，如果取j&#43;1,r，不能取右边界。  int main(){ scanf(&#34;%d&#34;,&amp;n); for(int i = 0; i &lt; n; i &#43;&#43; ) scanf(&#34;%d&#34;,&amp;q[i]); quick_sort(q,0,n-1); for(int i = 0; i &lt; n; i &#43;&#43; ) printf(&#34;%d &#34;,q[i]); return 0; } 排序的话，可以使用 #include&lt;algorithm&gt;sort(q, q&#43;n);     2."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://imingx.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "「Algorithm」01 基础算法",
      "item": "https://imingx.github.io/posts/algorithm_01/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "「Algorithm」01 基础算法",
  "name": "「Algorithm」01 基础算法",
  "description": "第一章 基础算法 包括排序，二分，高精度，前缀和与差分，位运算，离散化，区间合并\n消除同步  ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。 scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。 可以使用freopen  还可以加上 cin.tie(0) 来解除c++运行库层面的对数据传输的绑定。\n排序 1. 快速排序 基于分治。\n 确定一个分界点，比如（以1开始）,取q[1]，q[(1+r)/2] ,q[r]， 随机为x 调整区间，小于等于x的在左边，大于等于x的在右边。等于x的可以在左边也可以在右边，也可以在边界上，不稳定。 递归处理左右两段。    方法一:\n 开两个额外的数组,a[]，b[] 扫描q数组，如果q[i] ≤ x，存入a，如果q[i]\u0026gt;x，存入b。 然后将a数组的数存入q，b数组的数存入q。    方法二：\n i和j指针，i指向初始，j指向末尾。然后i向右走，直到遇到一个大于x的数。j向左走，直到遇到一个小于等于x的数。然后交换，直到 j ≤ i.  模板：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  #include \u0026lt;iostream\u0026gt; using namespace std; const int N = 1e6 + 10; int n; int q[N]; void quick_sort(int q[], int l, int r) { if (l \u0026gt;= r) return; int x = q[(l+r) \u0026gt;\u0026gt; 1], i = l - 1, j = r + 1; while( i \u0026lt; j){ do i ++ ; while (q[i] \u0026lt; x); do j -- ; while (q[j] \u0026gt; x); if (i \u0026lt; j ) swap(q[i],q[j]); } //j可能比i小，也可能等于i。  quick_sort(q, l, j); //也可以换成 l, i -1  quick_sort(q, j + 1, r); //换成 i, r  //后来说明不能换成i，因为也是会出现死循环问题。  //遇到这种情况，就考虑0,1。  //用j的话，x不能取右边界，（j可以取q[l]、q[(l+r)/2]）  //j不能取 q[r]、q[(l+r+1)/2]  //用i的话，x不能取左边界。 (i可以取q[r]、q[(l+r+1)/2])  //i不能取 q[l]、q[(l+r)/2] } //当下面换成i,r时，不能取x=q[l]，因为会出现死循环的问题。比如排序1，2 //i最终为0，j也是0，这样使用quick_sort()会死循环。 //同理，如果取j+1,r，不能取右边界。  int main(){ scanf(\u0026#34;%d\u0026#34;,\u0026amp;n); for(int i = 0; i \u0026lt; n; i ++ ) scanf(\u0026#34;%d\u0026#34;,\u0026amp;q[i]); quick_sort(q,0,n-1); for(int i = 0; i \u0026lt; n; i ++ ) printf(\u0026#34;%d \u0026#34;,q[i]); return 0; } 排序的话，可以使用 #include\u0026lt;algorithm\u0026gt;sort(q, q+n);     2.",
  "keywords": [
    
  ],
  "articleBody": "第一章 基础算法 包括排序，二分，高精度，前缀和与差分，位运算，离散化，区间合并\n消除同步  ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。 scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。 可以使用freopen  还可以加上 cin.tie(0) 来解除c++运行库层面的对数据传输的绑定。\n排序 1. 快速排序 基于分治。\n 确定一个分界点，比如（以1开始）,取q[1]，q[(1+r)/2] ,q[r]， 随机为x 调整区间，小于等于x的在左边，大于等于x的在右边。等于x的可以在左边也可以在右边，也可以在边界上，不稳定。 递归处理左右两段。    方法一:\n 开两个额外的数组,a[]，b[] 扫描q数组，如果q[i] ≤ x，存入a，如果q[i]x，存入b。 然后将a数组的数存入q，b数组的数存入q。    方法二：\n i和j指针，i指向初始，j指向末尾。然后i向右走，直到遇到一个大于x的数。j向左走，直到遇到一个小于等于x的数。然后交换，直到 j ≤ i.  模板：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  #include  using namespace std; const int N = 1e6 + 10; int n; int q[N]; void quick_sort(int q[], int l, int r) { if (l = r) return; int x = q[(l+r)  1], i = l - 1, j = r + 1; while( i  j){ do i ++ ; while (q[i]  x); do j -- ; while (q[j]  x); if (i  j ) swap(q[i],q[j]); } //j可能比i小，也可能等于i。  quick_sort(q, l, j); //也可以换成 l, i -1  quick_sort(q, j + 1, r); //换成 i, r  //后来说明不能换成i，因为也是会出现死循环问题。  //遇到这种情况，就考虑0,1。  //用j的话，x不能取右边界，（j可以取q[l]、q[(l+r)/2]）  //j不能取 q[r]、q[(l+r+1)/2]  //用i的话，x不能取左边界。 (i可以取q[r]、q[(l+r+1)/2])  //i不能取 q[l]、q[(l+r)/2] } //当下面换成i,r时，不能取x=q[l]，因为会出现死循环的问题。比如排序1，2 //i最终为0，j也是0，这样使用quick_sort()会死循环。 //同理，如果取j+1,r，不能取右边界。  int main(){ scanf(\"%d\",\u0026n); for(int i = 0; i  n; i ++ ) scanf(\"%d\",\u0026q[i]); quick_sort(q,0,n-1); for(int i = 0; i  n; i ++ ) printf(\"%d \",q[i]); return 0; } 排序的话，可以使用 #includesort(q, q+n);     2.归并排序 类似快排，也是分治。\n 以中间点为分界点。 递归排序左边和右边。 归并左右两个有序的数组为1个有序的数组。  对两个数组，取两个指针指向数组的左端点。然后比较他们的值，取较小者，然后移动指针，接着继续比较，直到一个指针到头，然后将另一个数组的剩余值取走。 当指针指向的值相同时，取左边数组的值，保持稳定，这说明归并排序是稳定的。快排是不稳定的。而让快排稳定的话，可以用pair。    为什么归并排序是O(nlogn),怎么分析？\n归并排序总共有logn层，每层都是O(n)，所以是O(nlogn)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  #include using namespace std; const int N = 1e6 + 10; int n; int q[N], tmp[N]; void merge_sort(int q[], int l, int r) { if (l = r) return; int mid = (l + r)  1; //+优先级比大，可以不加括号 \tmerge_sort(q, l, mid), merge_sort(q, mid + 1, r); int k = 0, i = l, j = mid + 1; while (i  mid \u0026\u0026 j  r) if (q[i]  q[j]) tmp[k++] = q[i++]; else tmp[k++] = q[j++]; while ( i  mid) tmp[k++] = q[i++]; while ( j  r) tmp[k++] = q[j++];\tfor ( i = l, j = 0; i  r; i++, j++) q[i] = tmp[j]; } int main(){ scanf(\"%d\",\u0026n); for(int i = 0; i  n; i ++ ) scanf(\"%d\",\u0026q[i]); merge_sort(q, 0, n-1); for(int i = 0; i  n; i ++ ) printf(\"%d \",q[i]); return 0; }   二分 1. 整数二分 模板：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  // 区间[l,r]被划分为[l,mid]与[mid + 1,r]时用 int bsearch_1(int l, int r) { while( l  r) { int mid = l + r  1; if (check(mid)) r= mid; //check判断mid是否满足性质 \telse l = mid + 1; } return l; } //区间[l,r]被划分成[l, mid - 1]和[mid, r]时使用。 int bsearch_2(int l, int r){ while(l  r) {\tint mid = l + r + 1  1; if(check(mid)) l = mid; else r = mid -1; } return l; }    二分的本质：寻找区间的边界。边界的左边满足某种性质，边界的右边满足另一种性质。   mid = (l+r+1)/2 找红色的边界点,检测中间值是否满足check。  check检查是否满足红色。 if mid满足check，那么需要向右找，那么 l = mid; [mid, r] if mid不满足check，那么需要向左找，那么r = mid -1：[l , mid - 1]   mid = (l + r)/ 2寻找绿色的边界点。check检测是否满足绿色。  if mid 满足 check, 那么需要向左找，那么 r = mid; [l , mid] if mid 不满足 check, 那么需要向右找，那么 l = mid + 1; [mid + 1, r]    为什么第一个需要mid = (l + r + 1)/2 ，因为如果r = l + 1，如果不加一，那么mid = l，区间的更新为：[l,r] 和[l,l]，陷入了死循环。\n所以总的来说，我们如何使用上面两个？\n1，2，2，3，3，4。\n找3的起始坐标和终止坐标。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  //https://www.acwing.com/problem/content/791/ #include  using namespace std; const int N = 1e5 + 10; int n,m; int q[N]; int main(){ scanf(\"%d%d\", \u0026n, \u0026m); for(int i = 0; i  n; i++ ) scanf(\"%d\", \u0026q[i]); while(m--){ int x; scanf(\"%d\", \u0026x); int l = 0, r = n -1; while ( l  r) { int mid = l + r  1; if (q[mid] = x){ //找起始坐标 \tr = mid; } else l = mid + 1; } // l == r \tif (q[l] != x) cout  \"-1 -1\"  endl; else { cout  l  \" \"; int l = 0, r = n - 1; while (l  r){ int mid = (l + r + 1)  1; if (q[mid]  x) l = mid; // l =mid，需要 l+r+1  1 \telse r = mid - 1; } cout  l  endl; } } return 0; }   2. 浮点数二分 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  #include using namespace std; int main(){ double x; cin  x; double l = 0, r= x; while( r - l  1e-6){ //1e8 \tdouble mid = (l+r)/2; if (mid * mid = x) r = mid; else l = mid; } /* 迭代100次; for (int i = 0; i double mid = (l+r)/2; if (mid * mid = x)\tr = mid; else l = mid; } */\tprintf(\"%lf\\n\", l); return 0; } //保留几位小数，增加2有效位。保留2位，1e-4   三次方根：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  #include#includeusing namespace std; int main(){ double x; cin  x; double l = -1000, r= 1000; while( r - l  1e-8){ double mid = (l+r)/2; if (mid * mid *mid = x) r = mid; else l = mid; } printf(\"%lf\\n\", l); return 0; }   牛顿迭代法求平方根：a 是待求平方根的数\n$$x = \\frac{x^2_0+a}{2x_0}$$\n如何通俗易懂地讲解牛顿迭代法求开方？数值分析？ - 杨华的回答 - 知乎 https://www.zhihu.com/question/20690553/answer/15864267\n高精度 只有C++需要关注。Python默认数是无限大，Java有大整数BigInteger和BigDecimal。\n A + B A - B A * a len(A) ≤ 10^6 a ≤ 10^9 A / a 求商和余数  存储方法：比如 123456789\n 给一个数组a[9]，那么a[0] = 9，a[1] = 8，……a[8] = 1，数组的低位存数字的低位。  加法： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55  #include#include#include using namespace std; const int N = 1e6 + 10; vectorint add(vectorint \u0026A, vectorint\u0026B){ vectorint C; int t = 0; //进位  for(int i = 0; i  A.size() || i  B.size(); i ++){ if (i  A.size()) t += A[i]; if (i  B.size()) t += B[i]; C.push_back(t % 10); t /= 10; } if(t) C.push_back(t); return C; } /* vector add(vector \u0026A, vector\u0026B){ vector C; if (A.size() int t = 0; //进位 for(int i = 0; i t += A[i]; if (i C.push_back(t % 10); t /= 10; } if(t) C.push_back(t); return C; } */ int main(){ string a,b; vectorint A,B; cin  a  b; for (int i = a.size() - 1; i = 0; i --) A.push_back(a[i] - '0'); for (int i = b.size() - 1; i = 0; i --) B.push_back(b[i] - '0'); auto C = add(A,B); for (int i = C.size() - 1; i = 0; i --) printf(\"%d\",C[i]); return 0; }   如果每一个存放不止一位数字：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67  #include #include  using namespace std; const int base = 1000000000; vectorint add(vectorint \u0026A, vectorint \u0026B) { if (A.size()  B.size()) return add(B, A); vectorint C; int t = 0; for (int i = 0; i  A.size(); i ++ ) { t += A[i]; if (i  B.size()) t += B[i]; C.push_back(t % base); t /= base; } if (t) C.push_back(t); return C; } int main() { string a, b; vectorint A, B; cin  a  b; for (int i = a.size() - 1, s = 0, j = 0, t = 1; i = 0; i -- ) { s += (a[i] - '0') * t; j ++, t *= 10; if (j == 9 || i == 0) { A.push_back(s); s = j = 0; t = 1; } } for (int i = b.size() - 1, s = 0, j = 0, t = 1; i = 0; i -- ) { s += (b[i] - '0') * t; j ++, t *= 10; if (j == 9 || i == 0) { B.push_back(s); s = j = 0; t = 1; } } auto C = add(A, B); cout  C.back(); for (int i = C.size() - 2; i = 0; i -- ) printf(\"%09d\", C[i]); cout  endl; return 0; } 作者：yxc 链接：https://www.acwing.com/activity/content/code/content/39792/ 来源：AcWing 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。   减法： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50  #include#include#include using namespace std; const int N = 1e5 + 10; bool cmp(vectorint \u0026A, vectorint\u0026B) { if (A.size() != B.size()) return A.size()  B.size(); for(int i = A.size() - 1 ; i = 0; i--) if(A[i] != B[i]) return A[i]  B[i]; return true; } vectorint sub(vectorint\u0026A, vectorint\u0026B){ vectorint C; for (int i = 0, t =0; i  A.size(); ++ i){ t = A[i] - t; if (i  B.size()) t -= B[i]; C.push_back((t + 10) % 10); //数学，当t小于0，就可以+10，而如果t =0， 就无影响；  if ( t  0) t = 1; //有借位  else t = 0; } while(C.size()  1 \u0026\u0026 C.back() == 0) C.pop_back(); return C; } int main(){ string a,b; vectorint A,B; cin  a  b; for(int i = a.size() - 1; i = 0; -- i) A.push_back(a[i] - '0'); for(int i = b.size() - 1; i = 0; -- i) B.push_back(b[i] - '0'); if (cmp(A,B)) { auto C = sub(A,B); for (int i = C.size() - 1; i = 0; -- i) printf(\"%d\", C[i]); } else { auto C = sub(B,A); printf(\"-\"); for (int i = C.size() - 1; i = 0; -- i) printf(\"%d\", C[i]); } return 0; }   乘法： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  #include#include#include using namespace std; const int N = 1e5 + 10; vectorint mul(vectorint\u0026A, int b){ vectorint C; int t = 0; for(int i = 0; i  A.size() || t; ++ i) { if (i  A.size()) t += A[i] * b; C.push_back(t % 10); t /= 10; } while(C.size()  1 \u0026\u0026 C.back() == 0) C.pop_back(); return C; } int main(){ string a; int b; vectorint A; cin  a  b; for(int i = a.size() - 1; i = 0; -- i) A.push_back(a[i] - '0'); auto C = mul(A,b); for (int i = C.size() - 1; i = 0; -- i) printf(\"%d\", C[i]); return 0; }   除法： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  #include#include#include#include using namespace std; vectorint div(vectorint \u0026A, int b, int \u0026r) { vectorint C; r = 0; for(int i = A.size() - 1; i = 0; -- i) { r = r * 10 + A[i]; C.push_back(r / b); r %= b; } reverse(C.begin(), C.end()); while(C.size()  1 \u0026\u0026 C.back() == 0) C.pop_back(); return C; } int main(){ string a; int b; cin  a  b; vectorint A; for(int i = a.size() - 1; i = 0; -- i) A.push_back(a[i] - '0'); int r = 0; auto C = div(A, b, r); for(int i = C.size() - 1; i = 0; -- i) printf(\"%d\", C[i]); cout  endl  r  endl; return 0; }   前缀和 与 差分 前缀和与差分是逆运算。\n前缀和：  一个长度为n的数组 然后前缀和数组,Si = 前i个数的和（从a1、a2到ai）。 定义$S_0 = 0$;  问题是如何求Si，求前i个和即可。\n！作用：求一段数字的和。比如求[l, r]，那么就是求\n$$S_r - S_{l-1}$$\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  #include using namespace std; const int N = 1e5 + 10; int n, m; int a[N], s[N]; int main(){ //ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。  //可以，但是scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。  //可以使用freopen。  cin  n  m; for (int i = 1; i  n; ++ i) scanf(\"%d\", \u0026a[i]); for (int i = 1; i  n; ++ i) s[i] = s[i - 1] + a[i]; while(m --) { int l,r; scanf(\"%d%d\",\u0026l,\u0026r); printf(\"%d\\n\",s[r] - s[l - 1]); } return 0; }   二维前缀和 从$(x_1,y_1)\\ to \\ (x_2,y_2)$，的区域的面积。那么就是：\n$$S_{x_2y_2}-S_{x_2(y_1-1)}-S_{(x_1-1)y_2}+S_{(x_1-1)(y_1-1)}$$\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  #include using namespace std; int n, m, q; const int N = 1e3 + 10; int a[N][N], s[N][N]; int main(){ cin  n  m  q; for (int i = 1; i  n; ++ i) for (int j = 1; j  m; ++ j){ scanf(\"%d\", \u0026a[i][j]); s[i][j] = s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1] + a[i][j]; } while(q --){ int x1,y1,x2,y2; scanf(\"%d%d%d%d\", \u0026x1,\u0026y1,\u0026x2,\u0026y2); printf(\"%d\\n\", s[x2][y2] - s[x1 - 1][y2] - s[x2][y1-1] + s[x1-1][y1-1]); } return 0; }   差分 a数组是b数组的前缀和，b数组是a的差分。\n对于a1, a2, a3……an\n构造 b1, b2, b3, bn\n使得 aj = b1 + b2 + …… + bj\n用处：a和b数组在O（n）时间可以相互转化。\n让al到ar，[l, r]的数都加上c，用差分只要O(1)。只要让$b_l+c$，然后让 $b_{r+1}-c$\n可以假定a数组和b数组全是零，只要看插入操作，即在[1, 1]的数都加上a1, [2,2]的数都加上a2\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  #include using namespace std; const int N = 1e5 + 10; int n, m; int a[N], b[N]; void insert(int l, int r, int c) { b[l] += c; b[r + 1] -= c; } int main(){ cin  n  m; for (int i = 1; i  n; ++ i) scanf(\"%d\", \u0026a[i]); for (int i = 1; i  n; ++ i) insert(i, i, a[i]); while(m --) { int l, r, c; scanf(\"%d%d%d\", \u0026l, \u0026r, \u0026c); insert(l, r, c); } for (int i = 1; i  n; ++ i) { b[i] += b[i-1]; //求前缀和  printf(\"%d \", b[i]); } return 0; }   差分矩阵 初始化时，也是可以相当于在(i, j)和(i, j)之间增加$a_{i,j}$\nb数组是a数组的差分，a数组是b数组的前缀和。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44  #include using namespace std; const int N = 1e3 + 10; int n, m, q; int a[N][N], b[N][N]; void insert(int x1, int y1, int x2, int y2, int c) { b[x1][y1] += c; b[x2 + 1][y1] -= c; b[x1][y2+1] -=c; b[x2+1][y2+1] +=c; } int main(){ cin  n  m  q; for (int i = 1; i  n; ++ i) for (int j = 1; j  m; ++ j) scanf(\"%d\",\u0026a[i][j]); for (int i = 1; i  n; ++ i) for (int j = 1; j  m; ++ j) insert(i,j,i,j,a[i][j]); while(q --) { int x1,y1,x2,y2,c; scanf(\"%d%d%d%d%d\", \u0026x1, \u0026y1, \u0026x2, \u0026y2, \u0026c); insert(x1, y1, x2, y2, c); } for (int i = 1; i  n; ++ i) { for (int j = 1; j  m; ++ j){ b[i][j] += b[i -1][j] + b[i][j -1] - b[i- 1][j-1]; printf(\"%d \", b[i][j]); } puts(\"\"); } return 0; }   双指针算法 包括归并排序\n1 2 3 4  for(int i = 0, j = 0; i  n; ++ i){ while( j  i \u0026\u0026 check(i, j)) ++ j; //具体逻辑 }   核心思想：把O(n^2)两重循环 变成 O(n).\n举个例子，输入一个句子，输出每个单词：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  #include#include using namespace std; int main() { char str[1000]; cin.getline(str, 1000); int n = strlen(str); for (int i = 0; i  n; ++ i) { int j = i; while( j  n \u0026\u0026 str[j] !=' ') ++ j; for (int k = i; k  j; k ++) cout  str[k]; cout  endl; i = j; } return 0; }   799. 最长连续不重复子序列\ncheck检验是否有重复元素\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  //数据很大时可以用hash table来做 #include using namespace std; const int N = 1e5 + 10; int n; int a[N], s[N]; int main() { cin  n; for (int i = 0; i  n; ++ i ) scanf(\"%d\",\u0026a[i]); int res = 0; for (int i = 0, j = 0; i  n; ++ i ) { ++ s[a[i]]; while (j  i \u0026\u0026 s[a[i]]  1) { -- s[a[j]]; ++ j; } res = max(res, i - j + 1); } cout  res; return 0; }   位运算 第k位的值  n的二进制表示中，第k位是几？个位是第零位。  先把第k位移到最后一位， n » k 再看个位是几。x \u0026 1. 即 (n » k) \u0026 1，»运算符的优先级大于 \u0026，可以不加括号。    lowbit操作。 可以用来统计x中的1的数量。\nlowbit(x)，返回x的最后一位的1。\nLowbit( 1010) —— 得到最后一个1。\n1 2 3  -x = ~x + 1。 补码表示。 那么 x \u0026 -x = x \u0026 ( ~x + 1)   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  #include using namespace std; int lowbit(int x) { return x \u0026 -x; } int main (){ int n; cin  n; while(n--){ int x; cin  x; int res = 0; while(x) x -= lowbit(x), ++ res; cout  res  \" \"; } return 0; }   一个数 -x 的：\n原码：最高位取1.\n反码：各位取反\n补码：各位取反，加一。\n离散化 整数的离散化：\n值域为$0-{10}^9$，个数有$10^5$。映射到0-n\n比如a[]: 1, 3, 100, 2000, 500000. 将它们映射到0，1，2，3，4，\n注意：\n a[]中可能有重复的元素，需要去重 如何算出a[i] 离散化后的值是多少？二分。  unique是将alls数组进行去重，将重复元素放在末尾，返回值是一个迭代器，指向非重复元素的最后一个，然后在删除这些元素就好。\n找到第一个≥ x的位置, 这个是边界问题。\n返回r+1是映射到1,2,……n\nUnique 如何实现Unique函数？\n比如1 1 2 2 2 3 4 5 5 5 6\n1 2 3 4 5 6 7 8 9 10 11  vectorint::iterator unique(vectorint \u0026a) { int j = 0; for(int i = 0; i  a.size(); ++ i ) { if (!i || a[i] != a[i-1]) a[j++] = a[i] } return a.begin() + j; }   区间和： 如果数据比较小，就是前缀和和差分的问题。但是这个问题的数据量比较大，而且有负数。\n这个问题，是插入的数量比较小。虽然跨度有10亿个，但是查询和插入的数量都是十万不到。所以需要离散化。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71  #include#include#include using namespace std; typedef pairint, int PII; const int N = 300010; int n,m; int a[N], s[N]; vectorint alls; vectorPII add, query; int find(int x) { int l = 0, r = alls.size() - 1; while (l  r) { int mid = l + r  1; if (alls[mid] = x) r = mid; else l = mid + 1; } return r + 1; } int main() { cin  n  m; for(int i = 0; i  n; ++ i ) { int x, c; cin  x  c; add.push_back({x,c}); alls.push_back(x); } for(int i = 0; i  m; ++ i) { int l, r; cin  l  r; query.push_back(make_pair(l,r)); alls.push_back(l); alls.push_back(r); } sort(alls.begin(), alls.end()); alls.erase(unique(alls.begin(), alls.end()), alls.end()); for(auto item : add) { int x = find(item.first); a[x] += item.second; } for (int i = 1; i  alls.size(); ++ i) s[i] = s[i - 1] + a[i]; for (auto item: query) { int l = find(item.first), r = find(item.second); cout  s[r] - s[l - 1]  endl; } return 0; }   区间合并 把有重叠点的区间合并\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55  #include#include#include using namespace std; const int N = 200010; typedef pairint, int PII; vectorPII segs; int n; void merge(vectorPII \u0026 segs) { vectorPII res; sort(segs.begin(), segs.end()); //先排first，再排second  int st = -2e9, ed = -2e9; //st = start, ed = end  for(auto seg : segs) { if (ed  seg.first) { if (st != -2e9) res.push_back({st, ed}); st = seg.first, ed = seg.second; } else { ed = max(ed, seg.second); } } if (st != -2e9) res.push_back({st, ed}); segs = res; } int main() { cin  n; for (int i = 0; i  n; ++ i) { int l, r; cin  l  r; segs.push_back({l, r}); } merge(segs); cout  segs.size()  endl; return 0; }   ",
  "wordCount" : "3513",
  "inLanguage": "en",
  "datePublished": "2021-11-09T00:30:02+08:00",
  "dateModified": "2021-11-09T00:30:02+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://imingx.github.io/posts/algorithm_01/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Ming Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://imingx.github.io/images/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://imingx.github.io/" accesskey="h" title="Ming Blog (Alt + H)">Ming Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://imingx.github.io/posts/" title="Post">
                    <span>Post</span>
                </a>
            </li>
            <li>
                <a href="https://imingx.github.io/archive/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://imingx.github.io/categories/" title="Cat">
                    <span>Cat</span>
                </a>
            </li>
            <li>
                <a href="https://imingx.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      「Algorithm」01 基础算法
    </h1>
    <div class="post-meta">November 9, 2021
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e7%ac%ac%e4%b8%80%e7%ab%a0-%e5%9f%ba%e7%a1%80%e7%ae%97%e6%b3%95" aria-label="第一章 基础算法">第一章 基础算法</a></li>
                <li>
                    <a href="#%e6%b6%88%e9%99%a4%e5%90%8c%e6%ad%a5" aria-label="消除同步">消除同步</a></li>
                <li>
                    <a href="#%e6%8e%92%e5%ba%8f" aria-label="排序">排序</a><ul>
                        
                <li>
                    <a href="#1-%e5%bf%ab%e9%80%9f%e6%8e%92%e5%ba%8f" aria-label="1. 快速排序">1. 快速排序</a></li>
                <li>
                    <a href="#2%e5%bd%92%e5%b9%b6%e6%8e%92%e5%ba%8f" aria-label="2.归并排序">2.归并排序</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e5%88%86" aria-label="二分">二分</a><ul>
                        
                <li>
                    <a href="#1-%e6%95%b4%e6%95%b0%e4%ba%8c%e5%88%86" aria-label="1. 整数二分">1. 整数二分</a></li>
                <li>
                    <a href="#2-%e6%b5%ae%e7%82%b9%e6%95%b0%e4%ba%8c%e5%88%86" aria-label="2. 浮点数二分">2. 浮点数二分</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%ab%98%e7%b2%be%e5%ba%a6" aria-label="高精度">高精度</a><ul>
                        
                <li>
                    <a href="#%e5%8a%a0%e6%b3%95" aria-label="加法：">加法：</a></li>
                <li>
                    <a href="#%e5%87%8f%e6%b3%95" aria-label="减法：">减法：</a></li>
                <li>
                    <a href="#%e4%b9%98%e6%b3%95" aria-label="乘法：">乘法：</a></li>
                <li>
                    <a href="#%e9%99%a4%e6%b3%95" aria-label="除法：">除法：</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%89%8d%e7%bc%80%e5%92%8c-%e4%b8%8e-%e5%b7%ae%e5%88%86" aria-label="前缀和 与 差分">前缀和 与 差分</a><ul>
                        <ul>
                        
                <li>
                    <a href="#%e5%89%8d%e7%bc%80%e5%92%8c" aria-label="前缀和："><strong>前缀和：</strong></a></li></ul>
                    
                <li>
                    <a href="#%e4%ba%8c%e7%bb%b4%e5%89%8d%e7%bc%80%e5%92%8c" aria-label="二维前缀和">二维前缀和</a></li>
                <li>
                    <a href="#%e5%b7%ae%e5%88%86" aria-label="差分">差分</a></li>
                <li>
                    <a href="#%e5%b7%ae%e5%88%86%e7%9f%a9%e9%98%b5" aria-label="差分矩阵">差分矩阵</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%8c%e6%8c%87%e9%92%88%e7%ae%97%e6%b3%95" aria-label="双指针算法">双指针算法</a></li>
                <li>
                    <a href="#%e4%bd%8d%e8%bf%90%e7%ae%97" aria-label="位运算">位运算</a><ul>
                        
                <li>
                    <a href="#%e7%ac%ack%e4%bd%8d%e7%9a%84%e5%80%bc" aria-label="第k位的值">第k位的值</a></li>
                <li>
                    <a href="#lowbit%e6%93%8d%e4%bd%9c" aria-label="lowbit操作。">lowbit操作。</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%a6%bb%e6%95%a3%e5%8c%96" aria-label="离散化">离散化</a><ul>
                        
                <li>
                    <a href="#unique" aria-label="Unique">Unique</a></li>
                <li>
                    <a href="#%e5%8c%ba%e9%97%b4%e5%92%8c" aria-label="区间和：">区间和：</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8c%ba%e9%97%b4%e5%90%88%e5%b9%b6" aria-label="区间合并">区间合并</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="第一章-基础算法">第一章 基础算法<a hidden class="anchor" aria-hidden="true" href="#第一章-基础算法">#</a></h1>
<p>包括排序，二分，高精度，前缀和与差分，位运算，离散化，区间合并</p>
<h1 id="消除同步">消除同步<a hidden class="anchor" aria-hidden="true" href="#消除同步">#</a></h1>
<ul>
<li>ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。</li>
<li>scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。</li>
<li>可以使用freopen</li>
</ul>
<p>还可以加上 cin.tie(0)   来解除c++运行库层面的对数据传输的绑定。</p>
<h1 id="排序">排序<a hidden class="anchor" aria-hidden="true" href="#排序">#</a></h1>
<h2 id="1-快速排序">1. 快速排序<a hidden class="anchor" aria-hidden="true" href="#1-快速排序">#</a></h2>
<p>基于分治。</p>
<ol>
<li>确定一个分界点，比如（以1开始）,取q[1]，q[(1+r)/2] ,q[r]， 随机为x</li>
<li>调整区间，小于等于x的在左边，大于等于x的在右边。等于x的可以在左边也可以在右边，也可以在边界上，不稳定。</li>
<li>递归处理左右两段。</li>
</ol>
<ul>
<li>
<p>方法一:</p>
<ol>
<li>开两个额外的数组,a[]，b[]</li>
<li>扫描q数组，如果q[i] ≤ x，存入a，如果q[i]&gt;x，存入b。</li>
<li>然后将a数组的数存入q，b数组的数存入q。</li>
</ol>
</li>
<li>
<p>方法二：</p>
<ol>
<li>i和j指针，i指向初始，j指向末尾。然后i向右走，直到遇到一个大于x的数。j向左走，直到遇到一个小于等于x的数。然后交换，直到 j ≤ i.</li>
</ol>
<p><strong>模板：</strong></p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#719e07">#include</span> <span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
using namespace std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e6</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> n;
<span style="color:#dc322f">int</span> q[N];

<span style="color:#dc322f">void</span> <span style="color:#268bd2">quick_sort</span>(<span style="color:#dc322f">int</span> q[], <span style="color:#dc322f">int</span> l, <span style="color:#dc322f">int</span> r)
{
        <span style="color:#719e07">if</span> (l <span style="color:#719e07">&gt;=</span> r) <span style="color:#719e07">return</span>;
        <span style="color:#dc322f">int</span> x <span style="color:#719e07">=</span> q[(l<span style="color:#719e07">+</span>r) <span style="color:#719e07">&gt;&gt;</span> <span style="color:#2aa198">1</span>], i <span style="color:#719e07">=</span> l <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>, j <span style="color:#719e07">=</span> r <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>;

        <span style="color:#719e07">while</span>( i <span style="color:#719e07">&lt;</span> j){
                <span style="color:#719e07">do</span> i <span style="color:#719e07">++</span> ; <span style="color:#719e07">while</span> (q[i] <span style="color:#719e07">&lt;</span> x);
                <span style="color:#719e07">do</span> j <span style="color:#719e07">--</span> ; <span style="color:#719e07">while</span> (q[j] <span style="color:#719e07">&gt;</span> x);
                <span style="color:#719e07">if</span> (i <span style="color:#719e07">&lt;</span> j ) swap(q[i],q[j]);
        }
        <span style="color:#586e75">//j可能比i小，也可能等于i。
</span><span style="color:#586e75"></span>        quick_sort(q, l, j); <span style="color:#586e75">//也可以换成 l, i -1
</span><span style="color:#586e75"></span>        quick_sort(q, j <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>, r); <span style="color:#586e75">//换成 i, r
</span><span style="color:#586e75"></span>        <span style="color:#586e75">//后来说明不能换成i，因为也是会出现死循环问题。
</span><span style="color:#586e75"></span>        <span style="color:#586e75">//遇到这种情况，就考虑0,1。
</span><span style="color:#586e75"></span>
        <span style="color:#586e75">//用j的话，x不能取右边界，（j可以取q[l]、q[(l+r)/2]）
</span><span style="color:#586e75"></span>                                <span style="color:#586e75">//j不能取 q[r]、q[(l+r+1)/2]
</span><span style="color:#586e75"></span>        <span style="color:#586e75">//用i的话，x不能取左边界。 (i可以取q[r]、q[(l+r+1)/2])
</span><span style="color:#586e75"></span>                                <span style="color:#586e75">//i不能取 q[l]、q[(l+r)/2]
</span><span style="color:#586e75"></span>}

<span style="color:#586e75">//当下面换成i,r时，不能取x=q[l]，因为会出现死循环的问题。比如排序1，2
</span><span style="color:#586e75">//i最终为0，j也是0，这样使用quick_sort()会死循环。
</span><span style="color:#586e75">//同理，如果取j+1,r，不能取右边界。
</span><span style="color:#586e75"></span>
<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
	scanf(<span style="color:#2aa198">&#34;%d&#34;</span>,<span style="color:#719e07">&amp;</span>n);
	<span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; i <span style="color:#719e07">++</span> ) scanf(<span style="color:#2aa198">&#34;%d&#34;</span>,<span style="color:#719e07">&amp;</span>q[i]);

	quick_sort(q,<span style="color:#2aa198">0</span>,n<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>);

	<span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; i <span style="color:#719e07">++</span> ) printf(<span style="color:#2aa198">&#34;%d &#34;</span>,q[i]);
	<span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}

排序的话，可以使用
<span style="color:#719e07">#include</span><span style="color:#719e07">&lt;algorithm&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>sort(q, q<span style="color:#719e07">+</span>n);
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="2归并排序">2.归并排序<a hidden class="anchor" aria-hidden="true" href="#2归并排序">#</a></h2>
<p>类似快排，也是分治。</p>
<ol>
<li>以中间点为分界点。</li>
<li>递归排序左边和右边。</li>
<li>归并左右两个有序的数组为1个有序的数组。
<ol>
<li>对两个数组，取两个指针指向数组的左端点。然后比较他们的值，取较小者，然后移动指针，接着继续比较，直到一个指针到头，然后将另一个数组的剩余值取走。</li>
<li>当指针指向的值相同时，取左边数组的值，保持稳定，这说明归并排序是稳定的。快排是不稳定的。而让快排稳定的话，可以用pair。</li>
</ol>
</li>
</ol>
<p>为什么归并排序是O(nlogn),怎么分析？</p>
<p>归并排序总共有logn层，每层都是O(n)，所以是O(nlogn)</p>
<p><img loading="lazy" src="img1.png" alt="Untitled"  />
</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
using namespace std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e6</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> n;
<span style="color:#dc322f">int</span> q[N], tmp[N];

<span style="color:#dc322f">void</span> <span style="color:#268bd2">merge_sort</span>(<span style="color:#dc322f">int</span> q[], <span style="color:#dc322f">int</span> l, <span style="color:#dc322f">int</span> r)
{
	<span style="color:#719e07">if</span> (l <span style="color:#719e07">&gt;=</span> r) <span style="color:#719e07">return</span>;

	<span style="color:#dc322f">int</span> mid <span style="color:#719e07">=</span> (l <span style="color:#719e07">+</span> r) <span style="color:#719e07">&gt;&gt;</span> <span style="color:#2aa198">1</span>; <span style="color:#586e75">//+优先级比&gt;&gt;大，可以不加括号
</span><span style="color:#586e75"></span>	
	merge_sort(q, l, mid), merge_sort(q, mid <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>, r);

	<span style="color:#dc322f">int</span> k <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, i <span style="color:#719e07">=</span> l, j <span style="color:#719e07">=</span> mid <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>;
	
	<span style="color:#719e07">while</span> (i <span style="color:#719e07">&lt;=</span> mid <span style="color:#719e07">&amp;&amp;</span> j <span style="color:#719e07">&lt;=</span> r)
			<span style="color:#719e07">if</span> (q[i] <span style="color:#719e07">&lt;=</span> q[j]) tmp[k<span style="color:#719e07">++</span>] <span style="color:#719e07">=</span> q[i<span style="color:#719e07">++</span>];
			<span style="color:#719e07">else</span> tmp[k<span style="color:#719e07">++</span>] <span style="color:#719e07">=</span> q[j<span style="color:#719e07">++</span>];

	<span style="color:#719e07">while</span> ( i <span style="color:#719e07">&lt;=</span> mid) tmp[k<span style="color:#719e07">++</span>] <span style="color:#719e07">=</span> q[i<span style="color:#719e07">++</span>];
	<span style="color:#719e07">while</span> ( j <span style="color:#719e07">&lt;=</span> r) tmp[k<span style="color:#719e07">++</span>] <span style="color:#719e07">=</span> q[j<span style="color:#719e07">++</span>];	

	<span style="color:#719e07">for</span> ( i <span style="color:#719e07">=</span> l, j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;=</span> r; i<span style="color:#719e07">++</span>, j<span style="color:#719e07">++</span>) q[i] <span style="color:#719e07">=</span> tmp[j];
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
	scanf(<span style="color:#2aa198">&#34;%d&#34;</span>,<span style="color:#719e07">&amp;</span>n);
	<span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; i <span style="color:#719e07">++</span> ) scanf(<span style="color:#2aa198">&#34;%d&#34;</span>,<span style="color:#719e07">&amp;</span>q[i]);
		
	merge_sort(q, <span style="color:#2aa198">0</span>, n<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>);

	<span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; i <span style="color:#719e07">++</span> ) printf(<span style="color:#2aa198">&#34;%d &#34;</span>,q[i]);
	<span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h1 id="二分">二分<a hidden class="anchor" aria-hidden="true" href="#二分">#</a></h1>
<h2 id="1-整数二分">1. 整数二分<a hidden class="anchor" aria-hidden="true" href="#1-整数二分">#</a></h2>
<p>模板：</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#586e75">// 区间[l,r]被划分为[l,mid]与[mid + 1,r]时用
</span><span style="color:#586e75"></span><span style="color:#dc322f">int</span> <span style="color:#268bd2">bsearch_1</span>(<span style="color:#dc322f">int</span> l, <span style="color:#dc322f">int</span> r) {
		<span style="color:#719e07">while</span>( l <span style="color:#719e07">&lt;</span> r)
		{
				<span style="color:#dc322f">int</span> mid <span style="color:#719e07">=</span> l <span style="color:#719e07">+</span> r <span style="color:#719e07">&gt;&gt;</span> <span style="color:#2aa198">1</span>;
				<span style="color:#719e07">if</span> (check(mid)) r<span style="color:#719e07">=</span> mid; <span style="color:#586e75">//check判断mid是否满足性质
</span><span style="color:#586e75"></span>				<span style="color:#719e07">else</span> l <span style="color:#719e07">=</span> mid <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>;
		}
		<span style="color:#719e07">return</span> l;
}

<span style="color:#586e75">//区间[l,r]被划分成[l, mid - 1]和[mid, r]时使用。
</span><span style="color:#586e75"></span><span style="color:#dc322f">int</span> <span style="color:#268bd2">bsearch_2</span>(<span style="color:#dc322f">int</span> l, <span style="color:#dc322f">int</span> r){
		<span style="color:#719e07">while</span>(l <span style="color:#719e07">&lt;</span> r)
		{	
				<span style="color:#dc322f">int</span> mid <span style="color:#719e07">=</span> l <span style="color:#719e07">+</span> r <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span> <span style="color:#719e07">&gt;&gt;</span> <span style="color:#2aa198">1</span>;
				<span style="color:#719e07">if</span>(check(mid)) l <span style="color:#719e07">=</span> mid;
				<span style="color:#719e07">else</span> r <span style="color:#719e07">=</span> mid <span style="color:#719e07">-</span><span style="color:#2aa198">1</span>;
		}
		<span style="color:#719e07">return</span> l;
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>二分的本质：寻找区间的边界。边界的左边满足某种性质，边界的右边满足另一种性质。</li>
</ul>
<p><img loading="lazy" src="img2.png" alt="Untitled"  />
</p>
<ol>
<li>mid = (l+r+1)/2 找红色的边界点,检测中间值是否满足check。
<ol>
<li>check检查是否满足红色。</li>
<li>if mid满足check，那么需要向右找，那么 l = mid;  [mid, r]</li>
<li>if mid不满足check，那么需要向左找，那么r = mid -1：[l , mid - 1]</li>
</ol>
</li>
<li>mid = (l + r)/ 2寻找绿色的边界点。check检测是否满足绿色。
<ol>
<li>if mid 满足 check, 那么需要向左找，那么 r = mid;  [l , mid]</li>
<li>if mid 不满足 check, 那么需要向右找，那么 l = mid + 1;  [mid + 1, r]</li>
</ol>
</li>
</ol>
<p>为什么第一个需要mid = (l + r + 1)/2 ，因为如果r = l + 1，如果不加一，那么mid = l，区间的更新为：[l,r] 和[l,l]，陷入了死循环。</p>
<p>所以总的来说，我们如何使用上面两个？</p>
<p>1，2，2，3，3，4。</p>
<p>找3的起始坐标和终止坐标。</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#586e75">//https://www.acwing.com/problem/content/791/
</span><span style="color:#586e75"></span><span style="color:#719e07">#include</span> <span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
using namespace std;
<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e5</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> n,m;
<span style="color:#dc322f">int</span> q[N];

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
		scanf(<span style="color:#2aa198">&#34;%d%d&#34;</span>, <span style="color:#719e07">&amp;</span>n, <span style="color:#719e07">&amp;</span>m);
		<span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; i<span style="color:#719e07">++</span> ) scanf(<span style="color:#2aa198">&#34;%d&#34;</span>, <span style="color:#719e07">&amp;</span>q[i]);
		<span style="color:#719e07">while</span>(m<span style="color:#719e07">--</span>){
				<span style="color:#dc322f">int</span> x;
				scanf(<span style="color:#2aa198">&#34;%d&#34;</span>, <span style="color:#719e07">&amp;</span>x);
				<span style="color:#dc322f">int</span> l <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, r <span style="color:#719e07">=</span> n <span style="color:#719e07">-</span><span style="color:#2aa198">1</span>;
				<span style="color:#719e07">while</span> ( l <span style="color:#719e07">&lt;</span> r)
				{
						<span style="color:#dc322f">int</span> mid <span style="color:#719e07">=</span> l <span style="color:#719e07">+</span> r <span style="color:#719e07">&gt;&gt;</span> <span style="color:#2aa198">1</span>;
						<span style="color:#719e07">if</span> (q[mid] <span style="color:#719e07">&gt;=</span> x){ <span style="color:#586e75">//找起始坐标
</span><span style="color:#586e75"></span>								 r <span style="color:#719e07">=</span> mid;
						} <span style="color:#719e07">else</span> 
								 l <span style="color:#719e07">=</span> mid <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>;
				}
				<span style="color:#586e75">// l == r
</span><span style="color:#586e75"></span>				<span style="color:#719e07">if</span> (q[l] <span style="color:#719e07">!=</span> x) cout <span style="color:#719e07">&lt;&lt;</span> <span style="color:#2aa198">&#34;-1 -1&#34;</span> <span style="color:#719e07">&lt;&lt;</span> endl;
				<span style="color:#719e07">else</span>
				{
						cout <span style="color:#719e07">&lt;&lt;</span> l <span style="color:#719e07">&lt;&lt;</span> <span style="color:#2aa198">&#34; &#34;</span>;
						<span style="color:#dc322f">int</span> l <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, r <span style="color:#719e07">=</span> n <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>;
						<span style="color:#719e07">while</span> (l <span style="color:#719e07">&lt;</span> r){
								<span style="color:#dc322f">int</span> mid <span style="color:#719e07">=</span> (l <span style="color:#719e07">+</span> r <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>) <span style="color:#719e07">&gt;&gt;</span> <span style="color:#2aa198">1</span>;
								<span style="color:#719e07">if</span> (q[mid] <span style="color:#719e07">&lt;=</span> x) l <span style="color:#719e07">=</span> mid; <span style="color:#586e75">// l =mid，需要 l+r+1 &gt;&gt; 1
</span><span style="color:#586e75"></span>								<span style="color:#719e07">else</span> r <span style="color:#719e07">=</span> mid <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>;
						}
						cout <span style="color:#719e07">&lt;&lt;</span> l <span style="color:#719e07">&lt;&lt;</span> endl;
				}
				
		}

		<span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h2 id="2-浮点数二分">2. 浮点数二分<a hidden class="anchor" aria-hidden="true" href="#2-浮点数二分">#</a></h2>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
using namespace std;

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
		
		<span style="color:#dc322f">double</span> x;
		cin <span style="color:#719e07">&gt;&gt;</span> x;

		<span style="color:#dc322f">double</span> l <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, r<span style="color:#719e07">=</span> x;
		<span style="color:#719e07">while</span>( r <span style="color:#719e07">-</span> l <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1e-6</span>){ <span style="color:#586e75">//1e8
</span><span style="color:#586e75"></span>				<span style="color:#dc322f">double</span> mid <span style="color:#719e07">=</span> (l<span style="color:#719e07">+</span>r)<span style="color:#719e07">/</span><span style="color:#2aa198">2</span>;
				<span style="color:#719e07">if</span> (mid <span style="color:#719e07">*</span> mid <span style="color:#719e07">&gt;=</span> x)
						r <span style="color:#719e07">=</span> mid;
				<span style="color:#719e07">else</span> l <span style="color:#719e07">=</span> mid;
		}

		<span style="color:#586e75">/*
</span><span style="color:#586e75">			迭代100次;
</span><span style="color:#586e75">			for (int i = 0; i &lt; 100; i++){
</span><span style="color:#586e75">					double mid = (l+r)/2;
</span><span style="color:#586e75">					if (mid * mid &gt;= x)	r = mid;
</span><span style="color:#586e75">							else l = mid;
</span><span style="color:#586e75">			}
</span><span style="color:#586e75">		*/</span>	
		printf(<span style="color:#2aa198">&#34;%lf</span><span style="color:#cb4b16">\n</span><span style="color:#2aa198">&#34;</span>, l);
		<span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}

<span style="color:#586e75">//保留几位小数，增加2有效位。保留2位，1e-4
</span></code></pre></td></tr></table>
</div>
</div><p>三次方根：</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;cmath&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>using namespace std;

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
		
		<span style="color:#dc322f">double</span> x;
		cin <span style="color:#719e07">&gt;&gt;</span> x;
	    <span style="color:#dc322f">double</span> l <span style="color:#719e07">=</span> <span style="color:#719e07">-</span><span style="color:#2aa198">1000</span>, r<span style="color:#719e07">=</span> <span style="color:#2aa198">1000</span>;
		<span style="color:#719e07">while</span>( r <span style="color:#719e07">-</span> l <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1e-8</span>){
				<span style="color:#dc322f">double</span> mid <span style="color:#719e07">=</span> (l<span style="color:#719e07">+</span>r)<span style="color:#719e07">/</span><span style="color:#2aa198">2</span>;
				<span style="color:#719e07">if</span> (mid <span style="color:#719e07">*</span> mid <span style="color:#719e07">*</span>mid <span style="color:#719e07">&gt;=</span> x)
						r <span style="color:#719e07">=</span> mid;
				<span style="color:#719e07">else</span> l <span style="color:#719e07">=</span> mid;
		}

		printf(<span style="color:#2aa198">&#34;%lf</span><span style="color:#cb4b16">\n</span><span style="color:#2aa198">&#34;</span>, l);
		<span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>牛顿迭代法求平方根：a 是待求平方根的数</p>
<p>$$x = \frac{x^2_0+a}{2x_0}$$</p>
<p>如何通俗易懂地讲解牛顿迭代法求开方？数值分析？ - 杨华的回答 - 知乎
<a href="https://www.zhihu.com/question/20690553/answer/15864267">https://www.zhihu.com/question/20690553/answer/15864267</a></p>
<h1 id="高精度">高精度<a hidden class="anchor" aria-hidden="true" href="#高精度">#</a></h1>
<p>只有C++需要关注。Python默认数是无限大，Java有大整数BigInteger和BigDecimal。</p>
<ol>
<li>A + B</li>
<li>A - B</li>
<li>A * a      len(A) ≤ 10^6    a ≤ 10^9</li>
<li>A / a       求商和余数</li>
</ol>
<p>存储方法：比如 123456789</p>
<ol>
<li>给一个数组a[9]，那么a[0] = 9，a[1] = 8，……a[8] = 1，数组的低位存数字的低位。</li>
</ol>
<h2 id="加法">加法：<a hidden class="anchor" aria-hidden="true" href="#加法">#</a></h2>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">55
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;vector&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;string&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e6</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> add(vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> <span style="color:#719e07">&amp;</span>A, vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;&amp;</span>B){
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> C;
    
    <span style="color:#dc322f">int</span> t <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; <span style="color:#586e75">//进位
</span><span style="color:#586e75"></span>    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> A.size() <span style="color:#719e07">||</span> i <span style="color:#719e07">&lt;</span> B.size(); i <span style="color:#719e07">++</span>){
        <span style="color:#719e07">if</span> (i <span style="color:#719e07">&lt;</span> A.size()) t <span style="color:#719e07">+=</span> A[i];
        <span style="color:#719e07">if</span> (i <span style="color:#719e07">&lt;</span> B.size()) t <span style="color:#719e07">+=</span> B[i];
        C.push_back(t <span style="color:#719e07">%</span> <span style="color:#2aa198">10</span>);
        t <span style="color:#719e07">/=</span> <span style="color:#2aa198">10</span>;
    }
    
    <span style="color:#719e07">if</span>(t) C.push_back(t);
    <span style="color:#719e07">return</span> C;
}

<span style="color:#586e75">/*
</span><span style="color:#586e75">vector&lt;int&gt; add(vector&lt;int&gt; &amp;A, vector&lt;int&gt;&amp;B){
</span><span style="color:#586e75">    vector&lt;int&gt; C;
</span><span style="color:#586e75">	    
</span><span style="color:#586e75">		if (A.size() &lt; B.size()) return add(B,A); 
</span><span style="color:#586e75">    int t = 0; //进位
</span><span style="color:#586e75">    for(int i = 0; i &lt; A.size(); i ++){
</span><span style="color:#586e75">			  t += A[i];
</span><span style="color:#586e75">        if (i &lt; B.size()) t += B[i];
</span><span style="color:#586e75">        C.push_back(t % 10);
</span><span style="color:#586e75">        t /= 10;
</span><span style="color:#586e75">    }
</span><span style="color:#586e75">    
</span><span style="color:#586e75">    if(t) C.push_back(t);
</span><span style="color:#586e75">    return C;
</span><span style="color:#586e75">}
</span><span style="color:#586e75">
</span><span style="color:#586e75">*/</span>

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
		string a,b;
		vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> A,B;
				
		cin <span style="color:#719e07">&gt;&gt;</span> a <span style="color:#719e07">&gt;&gt;</span> b;
		<span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> a.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">--</span>) A.push_back(a[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>);
		<span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> b.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">--</span>) B.push_back(b[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>);
		
		<span style="color:#719e07">auto</span> C <span style="color:#719e07">=</span> add(A,B);
		<span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> C.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">--</span>) printf(<span style="color:#2aa198">&#34;%d&#34;</span>,C[i]);
		
		<span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>如果每一个存放不止一位数字：</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">67
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span> <span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span> <span style="color:#719e07">&lt;vector&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> base <span style="color:#719e07">=</span> <span style="color:#2aa198">1000000000</span>;

vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> add(vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> <span style="color:#719e07">&amp;</span>A, vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> <span style="color:#719e07">&amp;</span>B)
{
    <span style="color:#719e07">if</span> (A.size() <span style="color:#719e07">&lt;</span> B.size()) <span style="color:#719e07">return</span> add(B, A);

    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> C;
    <span style="color:#dc322f">int</span> t <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> A.size(); i <span style="color:#719e07">++</span> )
    {
        t <span style="color:#719e07">+=</span> A[i];
        <span style="color:#719e07">if</span> (i <span style="color:#719e07">&lt;</span> B.size()) t <span style="color:#719e07">+=</span> B[i];
        C.push_back(t <span style="color:#719e07">%</span> base);
        t <span style="color:#719e07">/=</span> base;
    }

    <span style="color:#719e07">if</span> (t) C.push_back(t);
    <span style="color:#719e07">return</span> C;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>()
{
    string a, b;
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> A, B;
    cin <span style="color:#719e07">&gt;&gt;</span> a <span style="color:#719e07">&gt;&gt;</span> b;

    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> a.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>, s <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, t <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">--</span> )
    {
        s <span style="color:#719e07">+=</span> (a[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>) <span style="color:#719e07">*</span> t;
        j <span style="color:#719e07">++</span>, t <span style="color:#719e07">*=</span> <span style="color:#2aa198">10</span>;
        <span style="color:#719e07">if</span> (j <span style="color:#719e07">==</span> <span style="color:#2aa198">9</span> <span style="color:#719e07">||</span> i <span style="color:#719e07">==</span> <span style="color:#2aa198">0</span>)
        {
            A.push_back(s);
            s <span style="color:#719e07">=</span> j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
            t <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>;
        }
    }
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> b.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>, s <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, t <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">--</span> )
    {
        s <span style="color:#719e07">+=</span> (b[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>) <span style="color:#719e07">*</span> t;
        j <span style="color:#719e07">++</span>, t <span style="color:#719e07">*=</span> <span style="color:#2aa198">10</span>;
        <span style="color:#719e07">if</span> (j <span style="color:#719e07">==</span> <span style="color:#2aa198">9</span> <span style="color:#719e07">||</span> i <span style="color:#719e07">==</span> <span style="color:#2aa198">0</span>)
        {
            B.push_back(s);
            s <span style="color:#719e07">=</span> j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
            t <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>;
        }
    }

    <span style="color:#719e07">auto</span> C <span style="color:#719e07">=</span> add(A, B);

    cout <span style="color:#719e07">&lt;&lt;</span> C.back();
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> C.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">2</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">--</span> ) printf(<span style="color:#2aa198">&#34;%09d&#34;</span>, C[i]);
    cout <span style="color:#719e07">&lt;&lt;</span> endl;

    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}

作者：yxc
链接：https:<span style="color:#586e75">//www.acwing.com/activity/content/code/content/39792/
</span><span style="color:#586e75"></span>来源：AcWing
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
</code></pre></td></tr></table>
</div>
</div><h2 id="减法">减法：<a hidden class="anchor" aria-hidden="true" href="#减法">#</a></h2>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">50
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;string&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;vector&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e5</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">bool</span> <span style="color:#268bd2">cmp</span>(vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> <span style="color:#719e07">&amp;</span>A, vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;&amp;</span>B) {
    <span style="color:#719e07">if</span> (A.size() <span style="color:#719e07">!=</span> B.size()) <span style="color:#719e07">return</span> A.size() <span style="color:#719e07">&gt;</span> B.size();
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> A.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span> ; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; i<span style="color:#719e07">--</span>) 
        <span style="color:#719e07">if</span>(A[i] <span style="color:#719e07">!=</span> B[i])
            <span style="color:#719e07">return</span> A[i] <span style="color:#719e07">&gt;</span> B[i];
    <span style="color:#719e07">return</span> <span style="color:#b58900">true</span>;
}

vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> sub(vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;&amp;</span>A, vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;&amp;</span>B){
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> C;
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, t <span style="color:#719e07">=</span><span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> A.size(); <span style="color:#719e07">++</span> i){
        t <span style="color:#719e07">=</span> A[i] <span style="color:#719e07">-</span> t;
        <span style="color:#719e07">if</span> (i <span style="color:#719e07">&lt;</span> B.size()) t <span style="color:#719e07">-=</span> B[i];
        C.push_back((t <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>) <span style="color:#719e07">%</span> <span style="color:#2aa198">10</span>);
				<span style="color:#586e75">//数学，当t小于0，就可以+10，而如果t &gt;=0， 就无影响；
</span><span style="color:#586e75"></span>        <span style="color:#719e07">if</span> ( t <span style="color:#719e07">&lt;</span> <span style="color:#2aa198">0</span>) t <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; <span style="color:#586e75">//有借位
</span><span style="color:#586e75"></span>        <span style="color:#719e07">else</span> t <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
    }
    
    <span style="color:#719e07">while</span>(C.size() <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1</span> <span style="color:#719e07">&amp;&amp;</span> C.back() <span style="color:#719e07">==</span> <span style="color:#2aa198">0</span>) C.pop_back();
    
    <span style="color:#719e07">return</span> C;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
    string a,b;
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> A,B;
    cin <span style="color:#719e07">&gt;&gt;</span> a <span style="color:#719e07">&gt;&gt;</span> b;
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> a.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) A.push_back(a[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>);
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> b.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) B.push_back(b[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>);
    
    <span style="color:#719e07">if</span> (cmp(A,B)) {
        <span style="color:#719e07">auto</span> C <span style="color:#719e07">=</span> sub(A,B);
        <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> C.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) printf(<span style="color:#2aa198">&#34;%d&#34;</span>, C[i]);
    } <span style="color:#719e07">else</span> {
        <span style="color:#719e07">auto</span> C <span style="color:#719e07">=</span> sub(B,A);
        
        printf(<span style="color:#2aa198">&#34;-&#34;</span>);
        <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> C.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) printf(<span style="color:#2aa198">&#34;%d&#34;</span>, C[i]);
    }
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h2 id="乘法">乘法：<a hidden class="anchor" aria-hidden="true" href="#乘法">#</a></h2>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;string&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;vector&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e5</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> mul(vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;&amp;</span>A, <span style="color:#dc322f">int</span> b){
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> C;
    
    <span style="color:#dc322f">int</span> t <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> A.size() <span style="color:#719e07">||</span> t; <span style="color:#719e07">++</span> i) {
        <span style="color:#719e07">if</span> (i <span style="color:#719e07">&lt;</span> A.size()) t <span style="color:#719e07">+=</span> A[i] <span style="color:#719e07">*</span> b;
        C.push_back(t <span style="color:#719e07">%</span> <span style="color:#2aa198">10</span>);        
        t <span style="color:#719e07">/=</span> <span style="color:#2aa198">10</span>;
    }
   
    <span style="color:#719e07">while</span>(C.size() <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1</span> <span style="color:#719e07">&amp;&amp;</span> C.back() <span style="color:#719e07">==</span> <span style="color:#2aa198">0</span>) C.pop_back(); 
    <span style="color:#719e07">return</span> C;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
    string a;
    <span style="color:#dc322f">int</span> b;
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> A;
    
    cin <span style="color:#719e07">&gt;&gt;</span> a <span style="color:#719e07">&gt;&gt;</span> b;
    
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> a.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) A.push_back(a[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>);

    <span style="color:#719e07">auto</span> C <span style="color:#719e07">=</span> mul(A,b);
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> C.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) printf(<span style="color:#2aa198">&#34;%d&#34;</span>, C[i]);
   
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h2 id="除法">除法：<a hidden class="anchor" aria-hidden="true" href="#除法">#</a></h2>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;string&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;vector&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;algorithm&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> div(vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> <span style="color:#719e07">&amp;</span>A, <span style="color:#dc322f">int</span> b, <span style="color:#dc322f">int</span> <span style="color:#719e07">&amp;</span>r) {
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> C;
    r <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> A.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) {
        r <span style="color:#719e07">=</span> r <span style="color:#719e07">*</span> <span style="color:#2aa198">10</span> <span style="color:#719e07">+</span> A[i]; 
        C.push_back(r <span style="color:#719e07">/</span> b);
        r <span style="color:#719e07">%=</span> b;
    }
    
    reverse(C.begin(), C.end());
    
    <span style="color:#719e07">while</span>(C.size() <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1</span> <span style="color:#719e07">&amp;&amp;</span> C.back() <span style="color:#719e07">==</span> <span style="color:#2aa198">0</span>) C.pop_back();
    <span style="color:#719e07">return</span> C;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
    string a;
    <span style="color:#dc322f">int</span> b;
    
    cin <span style="color:#719e07">&gt;&gt;</span> a <span style="color:#719e07">&gt;&gt;</span> b;
    
    vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> A;
    
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> a.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) A.push_back(a[i] <span style="color:#719e07">-</span> <span style="color:#2aa198">&#39;0&#39;</span>);
    
    <span style="color:#dc322f">int</span> r <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
    <span style="color:#719e07">auto</span> C <span style="color:#719e07">=</span> div(A, b, r);
    
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> C.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&gt;=</span> <span style="color:#2aa198">0</span>; <span style="color:#719e07">--</span> i) printf(<span style="color:#2aa198">&#34;%d&#34;</span>, C[i]);
    
    cout <span style="color:#719e07">&lt;&lt;</span> endl <span style="color:#719e07">&lt;&lt;</span> r <span style="color:#719e07">&lt;&lt;</span> endl;
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h1 id="前缀和-与-差分">前缀和 与 差分<a hidden class="anchor" aria-hidden="true" href="#前缀和-与-差分">#</a></h1>
<p>前缀和与差分是逆运算。</p>
<h3 id="前缀和"><strong>前缀和：</strong><a hidden class="anchor" aria-hidden="true" href="#前缀和">#</a></h3>
<ul>
<li>一个长度为n的数组</li>
<li>然后前缀和数组,Si = 前i个数的和（从a1、a2到ai）。</li>
<li>定义$S_0 = 0$;</li>
</ul>
<p>问题是如何求Si，求前i个和即可。</p>
<p>！作用：求一段数字的和。比如求[l, r]，那么就是求</p>
<p>$$S_r - S_{l-1}$$</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e5</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> n, m;
<span style="color:#dc322f">int</span> a[N], s[N];

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
    <span style="color:#586e75">//ios::sync_with_stdio(false);//让cin和标准输入输出不同步，提高cin的读取速度，不能再使用scanf和printf了。
</span><span style="color:#586e75"></span>    <span style="color:#586e75">//可以，但是scanf/getchar和cin不要一起用，printf/puts/putchar和cout不要一起用。
</span><span style="color:#586e75"></span>    <span style="color:#586e75">//可以使用freopen。
</span><span style="color:#586e75"></span>    
    cin <span style="color:#719e07">&gt;&gt;</span> n <span style="color:#719e07">&gt;&gt;</span> m;
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i) scanf(<span style="color:#2aa198">&#34;%d&#34;</span>, <span style="color:#719e07">&amp;</span>a[i]);
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i) s[i] <span style="color:#719e07">=</span> s[i <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>] <span style="color:#719e07">+</span> a[i];
    
    <span style="color:#719e07">while</span>(m <span style="color:#719e07">--</span>)
    {
        <span style="color:#dc322f">int</span> l,r;
        scanf(<span style="color:#2aa198">&#34;%d%d&#34;</span>,<span style="color:#719e07">&amp;</span>l,<span style="color:#719e07">&amp;</span>r);
        printf(<span style="color:#2aa198">&#34;%d</span><span style="color:#cb4b16">\n</span><span style="color:#2aa198">&#34;</span>,s[r] <span style="color:#719e07">-</span> s[l <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>]);
    }
    
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;    
}
</code></pre></td></tr></table>
</div>
</div><h2 id="二维前缀和">二维前缀和<a hidden class="anchor" aria-hidden="true" href="#二维前缀和">#</a></h2>
<p><img loading="lazy" src="img3.png" alt="Untitled"  />
</p>
<p>从$(x_1,y_1)\ to  \ (x_2,y_2)$，的区域的面积。那么就是：</p>
<p>$$S_{x_2y_2}-S_{x_2(y_1-1)}-S_{(x_1-1)y_2}+S_{(x_1-1)(y_1-1)}$$</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#dc322f">int</span> n, m, q;
<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e3</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> a[N][N], s[N][N];

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
    cin <span style="color:#719e07">&gt;&gt;</span> n <span style="color:#719e07">&gt;&gt;</span> m <span style="color:#719e07">&gt;&gt;</span> q;
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i)
        <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> j <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; j <span style="color:#719e07">&lt;=</span> m; <span style="color:#719e07">++</span> j){
            scanf(<span style="color:#2aa198">&#34;%d&#34;</span>, <span style="color:#719e07">&amp;</span>a[i][j]);
            s[i][j] <span style="color:#719e07">=</span> s[i <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>][j] <span style="color:#719e07">+</span> s[i][j <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>] <span style="color:#719e07">-</span> s[i <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>][j <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>] <span style="color:#719e07">+</span> a[i][j];    
        }
    
    <span style="color:#719e07">while</span>(q <span style="color:#719e07">--</span>){
        <span style="color:#dc322f">int</span> x1,y1,x2,y2;
        scanf(<span style="color:#2aa198">&#34;%d%d%d%d&#34;</span>, <span style="color:#719e07">&amp;</span>x1,<span style="color:#719e07">&amp;</span>y1,<span style="color:#719e07">&amp;</span>x2,<span style="color:#719e07">&amp;</span>y2);
        printf(<span style="color:#2aa198">&#34;%d</span><span style="color:#cb4b16">\n</span><span style="color:#2aa198">&#34;</span>, s[x2][y2] <span style="color:#719e07">-</span> s[x1 <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>][y2] <span style="color:#719e07">-</span> s[x2][y1<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>] <span style="color:#719e07">+</span> s[x1<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>][y1<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>]);
    }
    
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h2 id="差分">差分<a hidden class="anchor" aria-hidden="true" href="#差分">#</a></h2>
<p>a数组是b数组的前缀和，b数组是a的差分。</p>
<p>对于a1, a2, a3……an</p>
<p>构造 b1, b2, b3,   bn</p>
<p>使得 aj  = b1 + b2 + …… + bj</p>
<p><img loading="lazy" src="img4.png" alt="Untitled"  />
</p>
<p><strong>用处：a和b数组在O（n）时间可以相互转化。</strong></p>
<p>让al到ar，[l, r]的数都加上c，用差分只要O(1)。只要让$b_l+c$，然后让 $b_{r+1}-c$</p>
<p>可以假定a数组和b数组全是零，只要看插入操作，即在[1, 1]的数都加上a1, [2,2]的数都加上a2</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e5</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> n, m;
<span style="color:#dc322f">int</span> a[N], b[N];

<span style="color:#dc322f">void</span> <span style="color:#268bd2">insert</span>(<span style="color:#dc322f">int</span> l, <span style="color:#dc322f">int</span> r, <span style="color:#dc322f">int</span> c)
{
    b[l] <span style="color:#719e07">+=</span> c;
    b[r <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>] <span style="color:#719e07">-=</span> c;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
    cin <span style="color:#719e07">&gt;&gt;</span> n <span style="color:#719e07">&gt;&gt;</span> m;
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i) scanf(<span style="color:#2aa198">&#34;%d&#34;</span>, <span style="color:#719e07">&amp;</span>a[i]);
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i) insert(i, i, a[i]);

    <span style="color:#719e07">while</span>(m <span style="color:#719e07">--</span>) {
        <span style="color:#dc322f">int</span> l, r, c;   
        scanf(<span style="color:#2aa198">&#34;%d%d%d&#34;</span>, <span style="color:#719e07">&amp;</span>l, <span style="color:#719e07">&amp;</span>r, <span style="color:#719e07">&amp;</span>c);
        insert(l, r, c);
    }
        
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i) {
        b[i] <span style="color:#719e07">+=</span> b[i<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>]; <span style="color:#586e75">//求前缀和
</span><span style="color:#586e75"></span>        printf(<span style="color:#2aa198">&#34;%d &#34;</span>, b[i]);
    }   
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h2 id="差分矩阵">差分矩阵<a hidden class="anchor" aria-hidden="true" href="#差分矩阵">#</a></h2>
<p><img loading="lazy" src="img5.png" alt="Untitled"  />
</p>
<p>初始化时，也是可以相当于在(i, j)和(i, j)之间增加$a_{i,j}$</p>
<p>b数组是a数组的差分，a数组是b数组的前缀和。</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e3</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> n, m, q;
<span style="color:#dc322f">int</span> a[N][N], b[N][N];

<span style="color:#dc322f">void</span> <span style="color:#268bd2">insert</span>(<span style="color:#dc322f">int</span> x1, <span style="color:#dc322f">int</span> y1, <span style="color:#dc322f">int</span> x2, <span style="color:#dc322f">int</span> y2, <span style="color:#dc322f">int</span> c)
{
    b[x1][y1] <span style="color:#719e07">+=</span> c;
    b[x2 <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>][y1] <span style="color:#719e07">-=</span> c;
    b[x1][y2<span style="color:#719e07">+</span><span style="color:#2aa198">1</span>] <span style="color:#719e07">-=</span>c;
    b[x2<span style="color:#719e07">+</span><span style="color:#2aa198">1</span>][y2<span style="color:#719e07">+</span><span style="color:#2aa198">1</span>] <span style="color:#719e07">+=</span>c;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>(){
    cin <span style="color:#719e07">&gt;&gt;</span> n <span style="color:#719e07">&gt;&gt;</span> m <span style="color:#719e07">&gt;&gt;</span> q;
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i) 
        <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> j <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; j <span style="color:#719e07">&lt;=</span> m; <span style="color:#719e07">++</span> j)
            scanf(<span style="color:#2aa198">&#34;%d&#34;</span>,<span style="color:#719e07">&amp;</span>a[i][j]);
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i)
        <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> j <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; j <span style="color:#719e07">&lt;=</span> m; <span style="color:#719e07">++</span> j)
            insert(i,j,i,j,a[i][j]);
        

    <span style="color:#719e07">while</span>(q <span style="color:#719e07">--</span>) {
        <span style="color:#dc322f">int</span> x1,y1,x2,y2,c;
        scanf(<span style="color:#2aa198">&#34;%d%d%d%d%d&#34;</span>, <span style="color:#719e07">&amp;</span>x1, <span style="color:#719e07">&amp;</span>y1, <span style="color:#719e07">&amp;</span>x2, <span style="color:#719e07">&amp;</span>y2, <span style="color:#719e07">&amp;</span>c);
        insert(x1, y1, x2, y2, c);
    }
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> n; <span style="color:#719e07">++</span> i) {
        <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> j <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; j <span style="color:#719e07">&lt;=</span> m; <span style="color:#719e07">++</span> j){
            b[i][j] <span style="color:#719e07">+=</span> b[i <span style="color:#719e07">-</span><span style="color:#2aa198">1</span>][j] <span style="color:#719e07">+</span> b[i][j <span style="color:#719e07">-</span><span style="color:#2aa198">1</span>] <span style="color:#719e07">-</span> b[i<span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>][j<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>]; 
            printf(<span style="color:#2aa198">&#34;%d &#34;</span>, b[i][j]);
        }
        puts(<span style="color:#2aa198">&#34;&#34;</span>);
    }
            
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h1 id="双指针算法">双指针算法<a hidden class="anchor" aria-hidden="true" href="#双指针算法">#</a></h1>
<p>包括归并排序</p>
<p><img loading="lazy" src="img6.png" alt="Untitled"  />
</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; <span style="color:#719e07">++</span> i){
		<span style="color:#719e07">while</span>( j <span style="color:#719e07">&lt;</span> i <span style="color:#719e07">&amp;&amp;</span> check(i, j)) <span style="color:#719e07">++</span> j;
		<span style="color:#586e75">//具体逻辑
</span><span style="color:#586e75"></span>}
</code></pre></td></tr></table>
</div>
</div><p>核心思想：把O(n^2)两重循环 变成 O(n).</p>
<p>举个例子，输入一个句子，输出每个单词：</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;cstring&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>() {
    <span style="color:#dc322f">char</span> str[<span style="color:#2aa198">1000</span>];
    
    cin.getline(str, <span style="color:#2aa198">1000</span>);
    
    <span style="color:#dc322f">int</span> n <span style="color:#719e07">=</span> strlen(str);
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; <span style="color:#719e07">++</span> i)
    {
        <span style="color:#dc322f">int</span> j <span style="color:#719e07">=</span> i;
        <span style="color:#719e07">while</span>( j <span style="color:#719e07">&lt;</span> n <span style="color:#719e07">&amp;&amp;</span> str[j] <span style="color:#719e07">!=</span><span style="color:#2aa198">&#39; &#39;</span>) <span style="color:#719e07">++</span> j;
        <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> k <span style="color:#719e07">=</span> i; k <span style="color:#719e07">&lt;</span> j; k <span style="color:#719e07">++</span>) cout <span style="color:#719e07">&lt;&lt;</span> str[k];
        
        cout <span style="color:#719e07">&lt;&lt;</span> endl;
        
        i <span style="color:#719e07">=</span> j;
    }
    
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p><strong>799. 最长连续不重复子序列</strong></p>
<p>check检验是否有重复元素</p>
<p><img loading="lazy" src="img7.png" alt="Untitled"  />
</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#586e75">//数据很大时可以用hash table来做
</span><span style="color:#586e75"></span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;
<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">1e5</span> <span style="color:#719e07">+</span> <span style="color:#2aa198">10</span>;

<span style="color:#dc322f">int</span> n;
<span style="color:#dc322f">int</span> a[N], s[N];

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>() {
    cin <span style="color:#719e07">&gt;&gt;</span> n;
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; <span style="color:#719e07">++</span> i ) 
        scanf(<span style="color:#2aa198">&#34;%d&#34;</span>,<span style="color:#719e07">&amp;</span>a[i]);
    
    <span style="color:#dc322f">int</span> res <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; <span style="color:#719e07">++</span> i )
    {
        <span style="color:#719e07">++</span> s[a[i]];
        <span style="color:#719e07">while</span> (j <span style="color:#719e07">&lt;=</span> i <span style="color:#719e07">&amp;&amp;</span> s[a[i]] <span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1</span>) {
            <span style="color:#719e07">--</span> s[a[j]];
            <span style="color:#719e07">++</span> j;
        }
        
        res <span style="color:#719e07">=</span> max(res, i <span style="color:#719e07">-</span> j <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>);
    }
    
    cout <span style="color:#719e07">&lt;&lt;</span> res;
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><h1 id="位运算">位运算<a hidden class="anchor" aria-hidden="true" href="#位运算">#</a></h1>
<h2 id="第k位的值">第k位的值<a hidden class="anchor" aria-hidden="true" href="#第k位的值">#</a></h2>
<ol>
<li>n的二进制表示中，第k位是几？个位是第零位。
<ol>
<li>先把第k位移到最后一位， n &raquo; k</li>
<li>再看个位是几。x &amp; 1.</li>
<li>即 (n &raquo; k) &amp; 1，&raquo;运算符的优先级大于 &amp;，可以不加括号。</li>
</ol>
</li>
</ol>
<h2 id="lowbit操作">lowbit操作。<a hidden class="anchor" aria-hidden="true" href="#lowbit操作">#</a></h2>
<p>可以用来统计x中的1的数量。</p>
<p>lowbit(x)，返回x的最后一位的1。</p>
<p>Lowbit( 1010)  ——&gt; 得到最后一个1。</p>
<p><img loading="lazy" src="img8.png" alt="Untitled"  />
</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">-</span>x <span style="color:#719e07">=</span> <span style="color:#719e07">~</span>x <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>。 补码表示。

那么 x <span style="color:#719e07">&amp;</span> <span style="color:#719e07">-</span>x <span style="color:#719e07">=</span> x <span style="color:#719e07">&amp;</span> ( <span style="color:#719e07">~</span>x <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>)
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#dc322f">int</span> <span style="color:#268bd2">lowbit</span>(<span style="color:#dc322f">int</span> x)
{
    <span style="color:#719e07">return</span> x <span style="color:#719e07">&amp;</span> <span style="color:#719e07">-</span>x;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span> (){
    <span style="color:#dc322f">int</span> n;
    cin <span style="color:#719e07">&gt;&gt;</span> n;
    
    <span style="color:#719e07">while</span>(n<span style="color:#719e07">--</span>){
        <span style="color:#dc322f">int</span> x;
        cin <span style="color:#719e07">&gt;&gt;</span> x;
        
        <span style="color:#dc322f">int</span> res <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
        <span style="color:#719e07">while</span>(x) x <span style="color:#719e07">-=</span> lowbit(x),  <span style="color:#719e07">++</span> res;
        cout <span style="color:#719e07">&lt;&lt;</span> res <span style="color:#719e07">&lt;&lt;</span> <span style="color:#2aa198">&#34; &#34;</span>;
    }

    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>一个数 -x 的：</p>
<p>原码：最高位取1.</p>
<p>反码：各位取反</p>
<p>补码：各位取反，加一。</p>
<p><img loading="lazy" src="img9.png" alt="Untitled"  />
</p>
<h1 id="离散化">离散化<a hidden class="anchor" aria-hidden="true" href="#离散化">#</a></h1>
<p>整数的离散化：</p>
<p>值域为$0-{10}^9$，个数有$10^5$。映射到0-n</p>
<p>比如a[]:  1, 3, 100, 2000, 500000. 将它们映射到0，1，2，3，4，</p>
<p>注意：</p>
<ol>
<li>a[]中可能有重复的元素，需要去重</li>
<li>如何算出a[i] 离散化后的值是多少？二分。</li>
</ol>
<p><img loading="lazy" src="img10.png" alt="Untitled"  />
</p>
<p>unique是将alls数组进行去重，将重复元素放在末尾，返回值是一个迭代器，指向非重复元素的最后一个，然后在删除这些元素就好。</p>
<p>找到第一个≥ x的位置, 这个是边界问题。</p>
<p>返回r+1是映射到1,2,……n</p>
<h2 id="unique">Unique<a hidden class="anchor" aria-hidden="true" href="#unique">#</a></h2>
<p>如何实现Unique函数？</p>
<p>比如1 1 2 2 2 3 4 5 5 5 6</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;::</span>iterator unique(vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> <span style="color:#719e07">&amp;</span>a)
{
		<span style="color:#dc322f">int</span> j <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>;
		<span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> a.size(); <span style="color:#719e07">++</span> i )
		{
				<span style="color:#719e07">if</span> (<span style="color:#719e07">!</span>i <span style="color:#719e07">||</span> a[i] <span style="color:#719e07">!=</span> a[i<span style="color:#719e07">-</span><span style="color:#2aa198">1</span>])
					a[j<span style="color:#719e07">++</span>] <span style="color:#719e07">=</span> a[i]
		} 

		<span style="color:#719e07">return</span> a.begin() <span style="color:#719e07">+</span> j;
}
</code></pre></td></tr></table>
</div>
</div><h2 id="区间和">区间和：<a hidden class="anchor" aria-hidden="true" href="#区间和">#</a></h2>
<p>如果数据比较小，就是前缀和和差分的问题。但是这个问题的数据量比较大，而且有负数。</p>
<p>这个问题，是插入的数量比较小。虽然跨度有10亿个，但是查询和插入的数量都是十万不到。所以需要离散化。</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">71
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;vector&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;algorithm&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">typedef</span> pair<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span>, <span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> PII;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">300010</span>;

<span style="color:#dc322f">int</span> n,m;
<span style="color:#dc322f">int</span> a[N], s[N];

vector<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> alls;
vector<span style="color:#719e07">&lt;</span>PII<span style="color:#719e07">&gt;</span> add, query;

<span style="color:#dc322f">int</span> <span style="color:#268bd2">find</span>(<span style="color:#dc322f">int</span> x)
{
    <span style="color:#dc322f">int</span> l <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>, r <span style="color:#719e07">=</span> alls.size() <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>;
    <span style="color:#719e07">while</span> (l <span style="color:#719e07">&lt;</span> r)
    {
        <span style="color:#dc322f">int</span> mid <span style="color:#719e07">=</span> l <span style="color:#719e07">+</span> r <span style="color:#719e07">&gt;&gt;</span> <span style="color:#2aa198">1</span>;
        <span style="color:#719e07">if</span> (alls[mid] <span style="color:#719e07">&gt;=</span> x) r <span style="color:#719e07">=</span> mid;
        <span style="color:#719e07">else</span> l <span style="color:#719e07">=</span> mid <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>;
    }
    
    <span style="color:#719e07">return</span> r <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>; 
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>() {
    cin <span style="color:#719e07">&gt;&gt;</span> n <span style="color:#719e07">&gt;&gt;</span> m;
    
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; <span style="color:#719e07">++</span> i )
    {
        <span style="color:#dc322f">int</span> x, c;
        cin <span style="color:#719e07">&gt;&gt;</span> x <span style="color:#719e07">&gt;&gt;</span> c;
        add.push_back({x,c});
        
        alls.push_back(x);
    }
    
    <span style="color:#719e07">for</span>(<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> m; <span style="color:#719e07">++</span> i)
    {
        <span style="color:#dc322f">int</span> l, r;
        cin <span style="color:#719e07">&gt;&gt;</span> l <span style="color:#719e07">&gt;&gt;</span> r;
        query.push_back(make_pair(l,r));
        
        alls.push_back(l);
        alls.push_back(r);
    }
    
    sort(alls.begin(), alls.end());
    alls.erase(unique(alls.begin(), alls.end()), alls.end());
    
    <span style="color:#719e07">for</span>(<span style="color:#719e07">auto</span> item : add) 
    {
        <span style="color:#dc322f">int</span> x <span style="color:#719e07">=</span> find(item.first);
        a[x] <span style="color:#719e07">+=</span> item.second;
    }
        
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>; i <span style="color:#719e07">&lt;=</span> alls.size(); <span style="color:#719e07">++</span> i) s[i] <span style="color:#719e07">=</span> s[i <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>] <span style="color:#719e07">+</span> a[i];
    
    <span style="color:#719e07">for</span> (<span style="color:#719e07">auto</span> item: query)
    {
        <span style="color:#dc322f">int</span> l <span style="color:#719e07">=</span> find(item.first), r <span style="color:#719e07">=</span> find(item.second);
        cout <span style="color:#719e07">&lt;&lt;</span> s[r] <span style="color:#719e07">-</span> s[l <span style="color:#719e07">-</span> <span style="color:#2aa198">1</span>] <span style="color:#719e07">&lt;&lt;</span> endl;
        
    }
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
    
}
</code></pre></td></tr></table>
</div>
</div><h1 id="区间合并">区间合并<a hidden class="anchor" aria-hidden="true" href="#区间合并">#</a></h1>
<p>把有重叠点的区间合并</p>
<p><img loading="lazy" src="img11.png" alt="Untitled"  />
</p>
<div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">55
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;iostream&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;algorithm&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07">#include</span><span style="color:#719e07">&lt;vector&gt;</span><span style="color:#719e07">
</span><span style="color:#719e07"></span>
<span style="color:#719e07">using</span> <span style="color:#719e07">namespace</span> std;

<span style="color:#719e07">const</span> <span style="color:#dc322f">int</span> N <span style="color:#719e07">=</span> <span style="color:#2aa198">200010</span>; 

<span style="color:#719e07">typedef</span> pair<span style="color:#719e07">&lt;</span><span style="color:#dc322f">int</span>, <span style="color:#dc322f">int</span><span style="color:#719e07">&gt;</span> PII;

vector<span style="color:#719e07">&lt;</span>PII<span style="color:#719e07">&gt;</span> segs;
<span style="color:#dc322f">int</span> n;

<span style="color:#dc322f">void</span> <span style="color:#268bd2">merge</span>(vector<span style="color:#719e07">&lt;</span>PII<span style="color:#719e07">&gt;</span> <span style="color:#719e07">&amp;</span> segs)
{
    vector<span style="color:#719e07">&lt;</span>PII<span style="color:#719e07">&gt;</span> res;
    
    sort(segs.begin(), segs.end()); <span style="color:#586e75">//先排first，再排second
</span><span style="color:#586e75"></span>    
    <span style="color:#dc322f">int</span> st <span style="color:#719e07">=</span> <span style="color:#719e07">-</span><span style="color:#2aa198">2e9</span>, ed <span style="color:#719e07">=</span> <span style="color:#719e07">-</span><span style="color:#2aa198">2e9</span>; <span style="color:#586e75">//st = start, ed = end
</span><span style="color:#586e75"></span>    
    <span style="color:#719e07">for</span>(<span style="color:#719e07">auto</span> seg : segs)
    {
        <span style="color:#719e07">if</span> (ed <span style="color:#719e07">&lt;</span> seg.first)  
        {
            <span style="color:#719e07">if</span> (st <span style="color:#719e07">!=</span> <span style="color:#719e07">-</span><span style="color:#2aa198">2e9</span>) res.push_back({st, ed});
            st <span style="color:#719e07">=</span> seg.first, ed <span style="color:#719e07">=</span> seg.second;
        }
        <span style="color:#719e07">else</span> 
        {
            ed <span style="color:#719e07">=</span> max(ed, seg.second);
        }
    }
    <span style="color:#719e07">if</span> (st <span style="color:#719e07">!=</span> <span style="color:#719e07">-</span><span style="color:#2aa198">2e9</span>) res.push_back({st, ed});
    
    segs <span style="color:#719e07">=</span> res;
}

<span style="color:#dc322f">int</span> <span style="color:#268bd2">main</span>()
{
    cin <span style="color:#719e07">&gt;&gt;</span> n;    
    
    <span style="color:#719e07">for</span> (<span style="color:#dc322f">int</span> i <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>; i <span style="color:#719e07">&lt;</span> n; <span style="color:#719e07">++</span> i)
    {
        <span style="color:#dc322f">int</span> l, r;
        cin <span style="color:#719e07">&gt;&gt;</span> l <span style="color:#719e07">&gt;&gt;</span> r;
        segs.push_back({l, r});
    }
    
    merge(segs);
    
    cout <span style="color:#719e07">&lt;&lt;</span> segs.size() <span style="color:#719e07">&lt;&lt;</span> endl;
    
    <span style="color:#719e07">return</span> <span style="color:#2aa198">0</span>;
}
</code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
  </footer><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "ming-ac" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="https://imingx.github.io/">Ming Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
